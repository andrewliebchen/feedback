/**
 * @jsx React.DOM
 */

const _ = lodash;

Card = React.createClass({
  propTypes: {
    className: React.PropTypes.string,
    name: React.PropTypes.string,
    image: React.PropTypes.string,
    index: React.PropTypes.number,
    editable: React.PropTypes.string,
    handleClick: React.PropTypes.func
  },

  getDefaultProps() {
    return {
      index: 1
    };
  },

  renderMissingIcon() {
    return <svg x="0px" y="0px" viewBox="38.974 53.377 113.386 141.7325"><path d="M123.484,112.771v-31.75c0-0.528-0.283-1.016-0.742-1.276c-0.458-0.264-1.021-0.258-1.477,0.012l-16.391,9.712   c-2.92-1.022-6.003-1.543-9.091-1.555c-0.036-0.003-0.071-0.011-0.108-0.011c-0.003,0-0.004,0-0.005,0   c-0.038,0-0.074,0.008-0.111,0.011c-3.087,0.012-6.17,0.534-9.092,1.555l-16.391-9.712c-0.453-0.27-1.017-0.276-1.477-0.012   c-0.46,0.262-0.742,0.749-0.742,1.277v31.755c0,15.336,12.477,27.814,27.812,27.814c15.337,0,27.814-12.478,27.815-27.814   C123.484,112.774,123.484,112.773,123.484,112.771z M95.67,137.65c-13.716,0-24.874-11.158-24.874-24.874   c0-0.002-0.001-0.003-0.001-0.005V83.599l12.314,7.296c-1.572,0.797-3.068,1.741-4.47,2.828c-0.641,0.498-0.759,1.421-0.261,2.062   c0.29,0.374,0.723,0.569,1.162,0.569c0.314,0,0.631-0.1,0.898-0.309c1.941-1.505,4.081-2.708,6.364-3.579   c0.048-0.017,0.098-0.03,0.144-0.052c0.281-0.105,0.564-0.205,0.848-0.3l-0.024,4.94c-0.004,0.812,0.65,1.472,1.462,1.477   c0.003,0,0.004,0,0.007,0c0.808,0,1.465-0.653,1.469-1.462l0.028-5.73c1.141-0.228,2.296-0.376,3.457-0.444l-0.025,6.804   c-0.003,0.812,0.653,1.471,1.464,1.475c0.003,0,0.004,0,0.005,0c0.809,0,1.467-0.654,1.47-1.464l0.025-6.815   c1.163,0.067,2.321,0.216,3.464,0.444l-0.028,5.716c-0.005,0.812,0.65,1.472,1.462,1.477c0.003,0,0.004,0,0.007,0   c0.808,0,1.465-0.653,1.469-1.462l0.024-4.958c0.304,0.101,0.607,0.207,0.907,0.32c0.022,0.01,0.046,0.016,0.068,0.025   c2.071,0.787,4.034,1.853,5.834,3.168c0.654,0.48,1.573,0.336,2.053-0.319c0.478-0.656,0.336-1.574-0.32-2.053   c-1.218-0.89-2.504-1.677-3.843-2.356l12.314-7.296v29.177c0,0.001,0,0.003,0,0.004C120.543,126.494,109.385,137.65,95.67,137.65z"/><path d="M108.82,121.173c-0.674-0.456-1.586-0.276-2.041,0.396c-0.986,1.461-2.624,2.332-4.385,2.332   c-2.915,0-5.288-2.372-5.288-5.288l0,0l0,0v-0.501l4.298-3.684c0.468-0.401,0.636-1.049,0.422-1.625   c-0.212-0.577-0.762-0.96-1.378-0.96h-9.555c-0.615,0-1.165,0.383-1.378,0.96c-0.214,0.577-0.046,1.225,0.422,1.625l4.228,3.622   v0.558c0,0.002-0.001,0.003-0.001,0.005c0,2.915-2.373,5.288-5.288,5.288c-1.596,0-3.091-0.711-4.102-1.95   c-0.512-0.628-1.438-0.723-2.066-0.21c-0.63,0.513-0.723,1.439-0.21,2.068c1.572,1.926,3.896,3.031,6.378,3.031   c0.159,0,0.313-0.015,0.47-0.024c1.303,2.2,3.705,3.593,6.288,3.593c2.581,0,4.984-1.392,6.288-3.593   c0.156,0.009,0.31,0.024,0.468,0.024c2.738,0,5.288-1.356,6.822-3.627C109.67,122.54,109.493,121.627,108.82,121.173z    M95.638,127.47c-1.243,0-2.415-0.54-3.232-1.435c1.301-0.621,2.416-1.568,3.232-2.742c0.816,1.174,1.931,2.121,3.232,2.742   C98.052,126.93,96.879,127.47,95.638,127.47z"/><circle cx="86.017" cy="107.566" r="2.91"/><circle cx="104.728" cy="107.566" r="2.91"/></svg>;
  },

  render() {
    return (
      <div
        className={`card card_${this.props.index} ${this.props.className}`}
        onClick={this.props.handleClick}>
        {this.props.editable ?
          <ImageUploader id={this.props.id} destination={this.props.editable}/>
        : null}
        {this.props.image ?
          <img className="card__image" src={this.props.image}/>
        : this.renderMissingIcon()}
        {this.props.name ?
          <span className="card__name">
            {_.startCase(this.props.name)}
          </span>
        : null}
      </div>
    );
  }
});
